---

theme : "League"
transition : "slide"
highlight : "darkula"

---


# Python講座

## 第3回 GUI編

---

## 早速ですが、

--

## Pythonの基本的な文法はわかった

--

## ライブラリの使い方もわかった

--

そろそろソフト作りたくなってきませんか？

--

きますよね？

--

だがしかし・・・

--

どうやってソフトを形にしたらよいだろう。

--

その答えの1つがGUIアプリケーション

---

### アプリの作り方
### （大まかな分類）

* CUI
* GUI
* Webアプリ

---

## 目的

<!--  -->  

* GUIアプリケーションを作れるようになる

---

# 1つ大事なこと

--

## PythonはGUIアプリ開発には向かない

やると言っておいてなんですが、

PythonよりGUIを開発しやすい言語はあります。

--

でもPythonが使いたい。

そんなときのために、一例として学びましょう。

---

## 本題に入るその前に

--

## オブジェクト指向を知る

かるーく

--

## なぜオブジェクト指向の知識が必要なのか

GUIライブラリがオブジェクト指向で作られているから
今回は、オブジェクトの取り扱いだけ覚えます。
（自分でオブジェクトを作るところはあまりやらない）

--

オブジェクト指向とは


--

手続き型とオブジェクト指向

手続き型　オブジェクト指向
C　Java

--

手続き型とオブジェクト指向の違い（イメージ）

--

ではPythonは？
どっちも使える

メリット：とっつきやすい、自由に書ける
デメリット：オブジェクト指向に統一したくても、手続きでかけてしまう

--

オブジェクト指向の特に知っておいてほしいところ

オブジェクト（クラス）は、
データ（メンバ、属性）と
メソッド（処理）
を持っている。

--

手続き型との大きな違い

データの持ち主
処理（関数）実行の制約

--

データの持ち主

手続き型
・メイン処理

オブジェクト指向
・クラス

--

何が違うか？

--

手続き型

メインがデータを持つ
実装は簡単
すべてのデータを定義する必要がある
データを使える範囲を指定できない。
（誰が使うデータかがわからなくなる可能性がある）

--

オブジェクト指向

オブジェクトがデータを持つ
メインはデータを定義する必要がない
オブジェクトに定義すれば、誰が使うデータなのかが明確になる。

--

## 処理実行の制約

--

手続き型

関数はどこでもコールできる
一見 便利だが・・・

--

呼んでほしくないときにも呼べる。


--

同名の関数を定義できない。

ToString

・ただ単に、文字列にしたいだけ。
・特定の形式に変換して文字列化したい。

といったように、用途が結構違う。
この場合、ToString〇〇というように関数名を分けなければいけない。

--

ライブラリを使うときに困るかもしれない。

別々のライブラリをインポートしたとき、同名の関数があったらどうなる？

おそろしい・・・

--

対して、オブジェクト指向はどうか

--

## オブジェクト指向

関数コールできる対象が限られる
オブジェクトが違えば、同名の関数でもいい。

--

オブジェクトはメソッドという形で、処理を持つ。
この処理は、所持するオブジェクトからしか呼べない。

--

処理はオブジェクトからしか呼べない。で説明したとおり、
オブジェクト->メソッド
の繋がりが必須になるので、
メソッド名（関数名）が、同じでもコール先を区別することができている。

同名の関数が共存できる。

--

基本的にPythonのライブラリを使用する場合、
そのライブラリのオブジェクトが生成されると思えばいい。
（当然、ライブラリ内でも細かくオブジェクト定義される）

--

具体的な、「ここがオブジェクトだよ」は
やりながらつかみましょう。

---

## 本題

---

## PythonでGUI開発

今回扱うのは2種類

* Tkinter
* Kivy

---

## Tkinter

Python標準のGUIライブラリ。

言語表現はシンプル。

できることもシンプル。

とっつきやすい。

応用が効きにくい。

大きなアプリを作ろうとするとめんどくさい。

---

## Kivy

最近Python界で注目されているGUIライブラリ。

[HTML+CSS]と[javascript]のように、レイアウトと動作を分けて記述することが特徴。

め・でめ

---

## その他のGUIライブラリ

* Kivy : 最近注目のライブラリ。[HTML+CSS]と[javascript]のように、レイアウトと動作を分けて記述できる。
* PyQt : 

<https://hajipro.com/python/python-gui-best>

---

## 目標とするソフトの紹介

* タイムスタンプツール

応用すれば工数管理ツールがつくれます。

---

## まずはTkinterの基礎から

--

ライブラリのインポート

~~~python
# -*- coding=utf-8 -*-

import tkinter as tk
~~~

--

メインウィンドウを出してみる

~~~python
# -*- coding=utf-8 -*-

import tkinter as tk


# いつもの
if __name__ == "__main__":
    main()
~~~

つづく

--

~~~python
def main():
    # Tkinterのルートインスタンスを作成
    root = tk.Tk()

    # タイトル、ウィンドウサイズを設定
    root.title('ハローワールド')
    root.geometry('525x300')

    label = tk.Label(root, text="Hello world.")
    label.pack()

    # アプリケーション実行
    root.mainloop()
~~~

--

ラベルを書いてみる

~~~python
def main():
    # Tkinterのルートインスタンスを作成
    root = tk.Tk()

    # タイトル、ウィンドウサイズを設定
    root.title('ハローワールド')
    root.geometry('525x300')

    label = tk.Label(root, text="Hello world.") ## ここ
    label.pack() # ここ

    # アプリケーション実行
    root.mainloop()
~~~

--

ボタンを付けてみる

~~~python
def main():
    # Tkinterのルートインスタンスを作成
    root = tk.Tk()

    # タイトル、ウィンドウサイズを設定
    root.title('ハローワールド')
    root.geometry('525x300')

    label = tk.Label(root, text="Hello world.")
    label.pack()

    button = tk.Button(root, text="ボタン") #ここ
    button.pack() # ここ

    # アプリケーション実行
    root.mainloop()
~~~

--

基本はおしまい

--

では、参考の画面を作ってみましょう。

---

## 動作の実装

データの流れはこんなイメージ


--

## クラス定義

クラス化しておくことで、データのやり取りが容易になる。

--

~~~python
# -*- coding=utf-8 -*-

import tkinter as tk

def main():
    # Tkinterのルートインスタンスを作成
    root = tk.Tk()

    # タイトル、ウィンドウサイズを設定
    root.title('タイムスタンプツール')
    root.geometry('530x400')

if __name__ == "__main__":
    main()
~~~

--

~~~python
class Apprication(tk.Frame):
    def __init__(self, master=None):

        # frameオブジェクトのコンストラクタを呼ぶ
        super().__init__(master)
        self.pack()
~~~

--

~~~python
def main():
    # Tkinterのルートインスタンスを作成
    root = tk.Tk()

    # タイトル、ウィンドウサイズを設定
    root.title('タイムスタンプツール')
    root.geometry('530x400')

    # 配置位置をルートに設定してアプリケーションインスタンスを作成
    app = Apprication(master=root)

    # アプリケーション実行
    app.mainloop()
~~~

--

実験

ボタンをクリックしたら、ラベルを変えてみる。

--

ボタンを押してデータをストックする
今回は、固定値にする。

--

データを画面に表示する

--

データを日付にしてみる
datetimeを使えば簡単

--

datetimeをインポートして、now()で現在時間を取得。

--

さっきの固定値を置き換えてみる

--

これでタイムスタンプのデータ保持はできた！

--

ところで、時間がちょっと細かすぎますね。

秒までに減らしましょう。

--

datetimeのフォーマット指定

--

TODO: ファイルへのセーブ、ロード機能

TODO: ボタンの文字変更機能と設定保存機能（JSON）

--

できた！


---

ポイント

Tkinterは手っ取り早くGUI化したいときには便利。
凝ったGUIアプリを作りたいときは、他も検討したほうがいい。
データ処理と、表示（GUI）をできるだけ分離することが大切。
